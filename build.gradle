plugins {
	id 'java'
}

repositories {
	mavenCentral()
}

dependencies {
    compile group: 'mysql', name: 'mysql-connector-java', version: '8.0.29'
}

def url = 'jdbc:mysql://localhost:3306/record-store?userSSL=false'
def driver = 'com.mysql.cj.jdbc.Driver'
def user = 'root'
def pwd = 'root'

task arguments {
	if (project.hasProperty("url")) {
		url = project.getProperty("url")
	}
	if (project.hasProperty("user")) {
		user = project.getProperty("user")
	}
	if (project.hasProperty("pwd")) {
		pwd = project.getProperty("pwd")
	}
	if (project.hasProperty("driver")) {
		driver = project.getProperty("driver")
	}
}

task createDB(type: JavaExec){
	description 'Creates tables for record store database.'

	classpath = sourceSets.main.runtimeClasspath
	main = 'DBInitializer'

	args url
	args user
	args pwd
	args driver
}

task runApp(type: JavaExec){
	description 'Runs db app'
	
	classpath = sourceSets.main.runtimeClasspath
	main = 'UI'
	
	args url
	args user
	args pwd
	args driver
}